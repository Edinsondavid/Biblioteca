<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<title>Panel Principal - Biblioteca</title>
		<!-- Google Fonts -->
		<link
			href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<!-- Bootstrap 5 CSS -->
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
		<!-- Font Awesome -->
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
		/>
		<!-- Custom CSS -->
		<link rel="stylesheet" href="/css/style.css" />
		<style>
			body {
				background: #121212;
				color: #eee;
				font-family: 'Poppins', sans-serif;
			}
			.sidebar {
				min-height: 100vh;
				background: #1f2a2a;
				color: #f0e6d2;
			}
			.sidebar .nav-link,
			.sidebar .nav-link i {
				color: #f0e6d2;
			}
			.sidebar .nav-link.active {
				background: #009688;
				color: #fff;
				font-weight: 600;
				border-radius: 0.3rem;
			}
			.sidebar .nav-link:hover {
				background: #00796b;
				color: #fff;
			}
			.brand {
				font-family: 'Brush Script MT', cursive;
				font-size: 2rem;
				color: #f0e6d2;
				margin-bottom: 2rem;
				letter-spacing: 1px;
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}
			.brand i {
				font-size: 1.8rem;
				color: #d4af37; /* Dorado */
				text-shadow: 0 0 6px #d4af37;
			}
			.dashboard-header {
				background: #009688;
				color: #fff;
				padding: 1.5rem 2rem;
				border-radius: 0 0 1rem 1rem;
				margin-bottom: 2rem;
				box-shadow: 0 4px 8px rgba(0, 150, 136, 0.6);
			}
			.card {
				background: #1f2a2a;
				border: none;
				color: #eee;
				border-radius: 1rem;
				box-shadow: 0 2px 12px rgba(0, 150, 136, 0.4);
			}
			.card-header {
				background: transparent;
				color: #d4af37;
				font-weight: 600;
				font-size: 1.25rem;
				border-bottom: none;
			}
			label {
				color: #ccc;
				font-weight: 500;
			}
			.form-control,
			.form-select {
				background: #2e3b3b;
				border: 1px solid #009688;
				color: #eee;
				border-radius: 0.4rem;
				transition: 0.3s;
			}
			.form-control:focus,
			.form-select:focus {
				background: #2e3b3b;
				color: #fff;
				border-color: #d4af37;
				box-shadow: 0 0 6px #d4af37;
			}
			.btn-danger {
				background-color: #d32f2f;
				border-color: #d32f2f;
				color: #fff;
				transition: 0.3s;
			}
			.btn-danger:hover {
				background-color: #b71c1c;
				border-color: #b71c1c;
				color: #fff;
			}
			.btn-success {
				background-color: #009688;
				border-color: #009688;
				color: #fff;
				transition: 0.3s;
			}
			.btn-success:hover {
				background-color: #00796b;
				border-color: #00796b;
				color: #fff;
			}
			.btn-light {
				color: #009688;
				background-color: #e0f2f1;
				border-color: #009688;
				transition: 0.3s;
			}
			.btn-light:hover {
				color: #fff;
				background-color: #009688;
				border-color: #00796b;
			}
			.alert-success {
				background-color: #004d40;
				color: #a5d6a7;
				border-color: #00796b;
			}
			.alert-danger {
				background-color: #b71c1c;
				color: #ffcdd2;
				border-color: #d32f2f;
			}
			.footer {
				background: #1f2a2a;
				color: #f0e6d2;
				padding-top: 1rem;
			}
			.footer-divider {
				border-top: 1px solid #d4af37;
			}
			.footer i {
				color: #d4af37;
			}
			a,
			a:hover,
			a:focus {
				color: #009688;
				text-decoration: none;
			}
			a:hover {
				color: #d4af37;
			}
		</style>
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				<!-- Sidebar -->
				<nav class="col-md-2 d-none d-md-block sidebar py-4">
					<div class="brand">
						<i class="fas fa-book-reader"></i>
						Biblioteca
					</div>
					<div class="user-info mb-4">
						<i class="fa fa-user-circle"></i>
						<strong>Edinson Berrio</strong>
						<br />
						<small>Administrador</small>
					</div>
					<ul class="nav flex-column">
						<li class="nav-item">
							<a class="nav-link" href="/"><i class="fa fa-home"></i> Dashboard</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#"><i class="fa fa-book"></i> Préstamos</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/authors"><i class="fa fa-users"></i> Autores</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/editorials"><i class="fa fa-list-alt"></i> Editoriales</a>
						</li>
						<li class="nav-item">
							<a class="nav-link active" href="/books"><i class="fa fa-book-open"></i> Libros</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="/categories"><i class="fa fa-cogs"></i> Categorías</a>
						</li>
					</ul>
				</nav>

				<!-- Main Content -->
				<main class="col-md-10 ms-sm-auto main-content px-4 py-4">
					<div class="dashboard-header">
						<h2 class="mb-0"><i class="fa fa-book-open me-2"></i>Gestión de Libros</h2>
					</div>

					<% if (messages.success) { %>
					<div
						class="alert alert-success alert-dismissible fade show"
						role="alert"
					>
						<i class="fas fa-check-circle me-2"></i
						><%- messages.success %>
						<button
							type="button"
							class="btn-close btn-close-white"
							data-bs-dismiss="alert"
							aria-label="Cerrar"
						></button>
					</div>
					<% } %>
					<% if (messages.error) { %>
					<div
						class="alert alert-danger alert-dismissible fade show"
						role="alert"
					>
						<i class="fas fa-exclamation-circle me-2"></i
						><%- messages.error %>
						<button
							type="button"
							class="btn-close btn-close-white"
							data-bs-dismiss="alert"
							aria-label="Cerrar"
						></button>
					</div>
					<% } %>

					<div class="card">
						<div class="card-header">
							<div
								class="d-flex justify-content-between align-items-center"
							>
								<h5 class="mb-0">
									<i class="fas fa-plus me-2"></i>Agregar Nuevo Libro
								</h5>
								<div>
									<a href="/" class="btn btn-light btn-sm me-2">
										<i class="fas fa-home me-2"></i>Inicio
									</a>
									<a href="/books" class="btn btn-light btn-sm">
										<i class="fas fa-arrow-left me-2"></i>Volver
									</a>
								</div>
							</div>
						</div>
						<div class="card-body">
							<form action="/books/add" method="POST">
								<div class="row">
									<div class="col-md-6 mb-3">
										<label for="title" class="form-label"
											>Título del Libro</label
										>
										<input
											type="text"
											class="form-control"
											id="title"
											name="title"
											required
											value="<%= typeof name !== 'undefined' ? name : '' %>"
										/>
									</div>
									<div class="col-md-6 mb-3">
										<label for="author" class="form-label">Autor</label>
										<select
											class="form-select"
											id="author"
											name="author"
											required
										>
											<option value="">Seleccione un autor</option>
											<% for (var i = 0; i < authors.length; i++) { %>
											<option value="<%= authors[i].id_author %>"
												><%= authors[i].name %></option
											>
											<% } %>
										</select>
									</div>
								</div>

								<div class="row">
									<div class="col-md-6 mb-3">
										<label for="editorial" class="form-label"
											>Editorial</label
										>
										<select
											class="form-select"
											id="editorial"
											name="editorial"
											required
										>
											<option value="">Seleccione una editorial</option>
											<% for (var i = 0; i < editorials.length; i++) { %>
											<option value="<%= editorials[i].id_editorial %>"
												><%= editorials[i].name %></option
											>
											<% } %>
										</select>
									</div>
									<div class="col-md-6 mb-3">
										<label for="category" class="form-label"
											>Categoría</label
										>
										<select
											class="form-select"
											id="category"
											name="category"
											required
										>
											<option value="">Seleccione una categoría</option>
											<% for (var i = 0; i < categories.length; i++) { %>
											<option value="<%= categories[i].id_category %>"
												><%= categories[i].name %></option
											>
											<% } %>
										</select>
									</div>
								</div>

								<div class="row">
									<div class="col-md-6 mb-3">
										<label for="isbn" class="form-label">ISBN</label>
										<input
											type="text"
											class="form-control"
											id="isbn"
											name="isbn"
											required
											value="<%= typeof isbn !== 'undefined' ? isbn : '' %>"
										/>
									</div>
									<div class="col-md-6 mb-3">
										<label for="year" class="form-label"
											>Año de Publicación</label
										>
										<input
											type="number"
											class="form-control"
											id="year"
											name="year"
											min="1900"
											max="<%= currentYear %>"
											required
											value="<%= typeof year_published !== 'undefined' ? year_published : '' %>"
										/>
									</div>
								</div>

								<div class="row">
									<div class="col-md-6 mb-3">
										<label for="edition" class="form-label">Edición</label>
										<input
											type="text"
											class="form-control"
											id="edition"
											name="edition"
											required
										/>
									</div>
									<div class="col-md-6 mb-3">
										<label for="available_copies" class="form-label"
											>Número de Ejemplares</label
										>
										<input
											type="number"
											class="form-control"
											id="available_copies"
											name="available_copies"
											min="1"
											required
											value="1"
										/>
									</div>
								</div>

								<div class="d-flex justify-content-between">
									<a href="/books" class="btn btn-danger">
										<i class="fas fa-arrow-left me-2"></i>Volver
									</a>
									<button type="submit" class="btn btn-success">
										<i class="fas fa-save me-2"></i>Guardar Libro
									</button>
								</div>
							</form>
						</div>
					</div>
				</main>
			</div>
		</div>

		<!-- Bootstrap 5 JS Bundle -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

		<!-- Footer -->
		<footer class="footer mt-5">
			<div class="container-fluid">
				<div class="row">
					<div class="col-12">
						<hr class="footer-divider" />
						<div
							class="d-flex justify-content-center align-items-center py-3"
						>
							<i class="fas fa-book-reader text-muted me-2"></i>
							<span class="text-muted"
								>Biblioteca © 2025 | Desarrollado por el Ing. Edinson Berrio</span
							>
						</div>
					</div>
				</div>
			</div>
		</footer>
	</body>
</html>
